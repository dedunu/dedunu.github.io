---
layout: post
title: Increase MySQL/MariaDB max_connections online (without a restart)
date: '2019-05-31T15:46:00.001+03:00'
author: Dedunu Dhananjaya
tags:
- database
- mysql
- mariadb
modified_time: '2019-05-31T15:51:36.181+03:00'
blogger_id: tag:blogger.com,1999:blog-8327060682734922468.post-6682807550148491086
blogger_orig_url: https://www.dedunu.info/2019/05/increase-mysqlmariadb-maxconnection.html
---

MySQL/MariaDB makes DBA's life much easier by allowing to increase the number of max_connections.<br /><br />You can use <span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">SHOW VARIABLE LIKE'max_connections';</span> to check the number of max connections allowed.<br /><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">mysql&gt; SHOW VARIABLE LIKE 'max_connections';<br />+-----------------+-------+<br />| Variable_name&nbsp;&nbsp; | Value |<br />+-----------------+-------+<br />| max_connections | 151&nbsp;&nbsp; |<br />+-----------------+-------+<br />1 row in set (0.01 sec)</span><br /><br />You might want to see how many connections you have in your database right now. You can use the below query to check that.<br /><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">mysql&gt; SELECT COUNT(1) FROM information_schema.processlist;<br />+----------+<br />| COUNT(1) |<br />+----------+<br />|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 100 |<br />+----------+<br />1 row in set (0.00 sec)</span><br /><br />Let's assume, we need to increase maximum connections allowed to 250. Please run below query.<br /><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">mysql&gt; SET GLOBAL max_connections = 250;<br />Query OK, 0 rows affected (0.00 sec)</span><br /><br />You can verify the change by running <span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">SHOW VARIABLE LIKE 'max_connections';</span> <br /><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">mysql&gt; SHOW VARIABLE LIKE 'max_connections';<br />+-----------------+-------+<br />| Variable_name&nbsp;&nbsp; | Value |<br />+-----------------+-------+<br />| max_connections | 250 &nbsp; |<br />+-----------------+-------+<br />1 row in set (0.01 sec)</span><br /><br />But our work is not done yet. If service restarts max_connection will reset to the old value. To make the change permanent, we need to change the configuration file.&nbsp; Find the relevant configuration file. It can be one of below files. (Depends on your installation.)<br /><ul><li><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">/etc/mysql/mysql.conf.d/mysqld.cnf</span></li><li><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">/etc/mysql/conf.d/mysql.cnf</span></li><li><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">/etc/mysql/mysql.cnf</span></li><li><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">/etc/mysql/my.cnf</span></li><li><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">/etc/my.cnf</span></li></ul><span style="font-family: inherit;">Once you manage to locate the file, look for the line "<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">max_connections&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = 151</span>" and change it to "<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">max_connections&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = 250</span>". Make sure it is not commented. (If there is a # in the begin of that line please remove that #. )</span>