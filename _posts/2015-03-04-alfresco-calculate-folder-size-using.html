---
layout: post
title: 'Alfresco: Calculate folder size using Java based WebScript'
date: '2015-03-04T20:07:00.001+02:00'
author: Dedunu Dhananjaya
tags:
- webscript
- Java
- recursive
- folder
- alfresco
modified_time: '2019-07-09T18:10:08.239+03:00'
thumbnail: https://1.bp.blogspot.com/-3XALkt-WA60/VPdII_SUDjI/AAAAAAAABOM/UJjeLuRVu80/s72-c/Screen%2BShot%2B2015-03-04%2Bat%2B11.25.58%2BPM.png
blogger_id: tag:blogger.com,1999:blog-8327060682734922468.post-2469495361791482463
permalink: www.dedunu.info/2015/03/alfresco-calculate-folder-size-using.html
---

<div dir="ltr" style="text-align: left;" trbidi="on"><div style="text-align: justify;">I was assigned to a training task to write a web script for calculating the size of a folder or a file. But you need to go through all the nodes recursively. If you don't calculate it recursively in folders you won't get accurate folder size.<br /><br />Requirements:<br /><ul><li>Java Development Kit 1.7 or later</li><li>Text Editor or IDE (Eclipse/Sublime Text/Atom)</li><li>Apache Maven 3 or later</li><li>Web Browser (Chrome/Firefox/Safari)</li></ul><br />For this project, I generated the&nbsp;<a href="http://www.dedunu.info/2015/01/how-to-generate-alfresco-5-amp-project.html" target="_blank">Alfresco 5 All-in-One maven project</a>. You really don't want Alfresco &nbsp;Share module in this project. But I included it because you may need to find a NodeRefId. It would be easier with Share.&nbsp; The source<a href="https://github.com/dedunumax/filesize-webscript" target="_blank">&nbsp;code of this project is available at GitHub</a>.</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">size.get.html.ftl <script src="https://gist.github.com/dedunumax/20a17d08c6efe1f2314f.js"></script></div><div style="text-align: justify;">size.get.desc.xml <script src="https://gist.github.com/dedunumax/e131cbf9aaef1ffc4e60.js"></script></div><div style="text-align: justify;">FileSizeWebScript.java  <script src="https://gist.github.com/dedunumax/be88aaf300dac7a19ed9.js"></script></div><div style="text-align: justify;">service-context.xml&nbsp;</div><div style="text-align: justify;"><script src="https://gist.github.com/dedunumax/3bb550ce1c3250613519.js"></script> Create above files in below locations of your maven project.&nbsp;</div><ul><li style="text-align: left;">size.get.desc.xml - repo-amp/src/main/amp/config/alfresco/extension/templates/webscripts/org/dedunu/alfresco/size.get.desc.xml</li><li style="text-align: left;">size.get.html.ftl - repo-amp/src/main/amp/config/alfresco/extension/templates/webscripts/org/dedunu/alfresco/size.get.html.ftl</li><li style="text-align: left;">FileSizeWebScript.java - repo-amp/src/main/java/org/dedunu/alfresco/FileSizeWebScript.java</li><li style="text-align: left;">service-context.xml - repo-amp/src/main/amp/config/alfresco/module/repo-amp/context/service-context.xml</li></ul><b><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;">How to test the web script?</span></b><br /><div style="text-align: justify;">Take a terminal. Navigate to project folder. And type below command.</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">mvn clean install -Prun -Dmaven.test.skip</span></div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">It may take a while to start the Alfresco Repository and Share server. Wait till it finishes completely.&nbsp;</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">Then open a web browser and go to <a href="http://localhost:8080/share"><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">http://localhost:8080/share</span></a>. Then login. Go to Document library.</div><div style="text-align: justify;"><br /></div><div class="separator" style="clear: both; text-align: justify;"><a href="http://1.bp.blogspot.com/-3XALkt-WA60/VPdII_SUDjI/AAAAAAAABOM/UJjeLuRVu80/s1600/Screen%2BShot%2B2015-03-04%2Bat%2B11.25.58%2BPM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="250" src="https://1.bp.blogspot.com/-3XALkt-WA60/VPdII_SUDjI/AAAAAAAABOM/UJjeLuRVu80/s1600/Screen%2BShot%2B2015-03-04%2Bat%2B11.25.58%2BPM.png" width="400" /></a></div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">Find a folder and click on "View Details". Then copy NodeRef from browser as shown below.</div><div style="text-align: justify;"><br /></div><div class="separator" style="clear: both; text-align: justify;"><a href="http://1.bp.blogspot.com/-VmlsYQdXa8E/VPdIaq0IucI/AAAAAAAABOU/4pukMQMRmE8/s1600/Screen%2BShot%2B2015-03-04%2Bat%2B11.26.05%2BPM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="250" src="https://1.bp.blogspot.com/-VmlsYQdXa8E/VPdIaq0IucI/AAAAAAAABOU/4pukMQMRmE8/s1600/Screen%2BShot%2B2015-03-04%2Bat%2B11.26.05%2BPM.png" width="400" /></a></div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">Open a new tab and type below URL. (Replace &lt;NodeRef&gt; with the NodeRef you copied from Alfresco Share interface.)</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><a href="http://localhost:8080/alfresco/s/size?nodeRef=%3CNodeRef%3E"><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">http://localhost:8080/alfresco/s/size?nodeRef=&lt;NodeRef&gt;</span></a></div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">If you have followed the instruction properly, you will get a page like below.</div><div style="text-align: justify;"><br /></div><div class="separator" style="clear: both; text-align: justify;"><a href="http://4.bp.blogspot.com/-09zxIR-N5dg/VPdJHJXr5pI/AAAAAAAABOc/EsSsf7swrLc/s1600/Screen%2BShot%2B2015-03-04%2Bat%2B11.25.34%2BPM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="172" src="https://4.bp.blogspot.com/-09zxIR-N5dg/VPdJHJXr5pI/AAAAAAAABOc/EsSsf7swrLc/s1600/Screen%2BShot%2B2015-03-04%2Bat%2B11.25.34%2BPM.png" width="400" /></a></div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">If you have any questions regarding these examples, please comment!!! Enjoy Alfresco!</div><div><br /></div></div>